**初始化阶段**使用**非对称加密**，**建立连接之后**使用**对称加密**。

1. TCP连接，端口号 **22**
2. A  --**A-公钥**--> B 
3. B --**B-公钥**+**B-加密算法列表**--> A,  A 通过**B-公钥**检测**known_hosts**是否之前连接过B
4. 协商生成密钥（通过Diffie - Hellman算法）
5. A --**A-公钥id**--> B
6. B需要对A的合法性进行验证（B --发私钥(随机数)-->A)
7. A --(MD5(密钥+随机数))--> B，B计算MD5(密钥+随机数)，进行比较。
8. 验证成功建立SSH连接。

